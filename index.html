<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kunlik Reja - Biznes Planner v1.0.0</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap');
        body { font-family: 'Inter', sans-serif; margin: 0; padding: 0; }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useRef, useEffect } = React;
        
        // Lucide icons as SVG components
        const Target = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className}>
                <circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="6"/><circle cx="12" cy="12" r="2"/>
            </svg>
        );
        
        const CheckCircle = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className}>
                <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/>
            </svg>
        );
        
        const Calendar = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className}>
                <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/>
            </svg>
        );
        
        const Clock = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className}>
                <circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/>
            </svg>
        );
        
        const Download = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className}>
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/>
            </svg>
        );
        
        const X = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className}>
                <line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/>
            </svg>
        );
        
        const ZoomIn = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className}>
                <circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/><line x1="11" y1="8" x2="11" y2="14"/><line x1="8" y1="11" x2="14" y2="11"/>
            </svg>
        );
        
        const ZoomOut = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className}>
                <circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/><line x1="8" y1="11" x2="14" y2="11"/>
            </svg>
        );
        
        const Home = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className}>
                <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/>
            </svg>
        );
        
        const Link2 = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className}>
                <path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"/><line x1="8" y1="12" x2="16" y2="12"/>
            </svg>
        );
        
        const Trash2 = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className}>
                <polyline points="3 6 5 6 21 6"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/><line x1="10" y1="11" x2="10" y2="17"/><line x1="14" y1="11" x2="14" y2="17"/>
            </svg>
        );

        function MindMap() {
            const VERSION = "v1.0.0"; // Versiya
            const [currentDate] = useState(new Date('2024-10-20T19:39:00'));
            const [showToday, setShowToday] = useState(false);
            
            const dailyTasks = [
                { date: '2024-10-20', tasks: [
                    { text: '20 kartochka yaxshilash', color: '#F59E0B', category: 'Yandex' },
                    { text: '200 mahsulot yuklash', color: '#10B981', category: 'Yandex' },
                    { text: 'Rasmlarni tekshirish', color: '#34D399', category: 'Yandex' }
                ]},
                { date: '2024-10-21', tasks: [
                    { text: '20 kartochka yaxshilash', color: '#F59E0B', category: 'Yandex' },
                    { text: '200 mahsulot yuklash', color: '#10B981', category: 'Yandex' },
                    { text: 'Magazin dizayni boshlash', color: '#A78BFA', category: 'Magazin' }
                ]},
                { date: '2024-10-22', tasks: [
                    { text: '20 kartochka yaxshilash', color: '#F59E0B', category: 'Yandex' },
                    { text: '200 mahsulot yuklash', color: '#10B981', category: 'Yandex' },
                    { text: 'Frontend tayyor qilish', color: '#A78BFA', category: 'Magazin' }
                ]},
                { date: '2024-10-23', tasks: [
                    { text: '20 kartochka yaxshilash', color: '#F59E0B', category: 'Yandex' },
                    { text: '200 mahsulot yuklash', color: '#10B981', category: 'Yandex' },
                    { text: 'Responsive dizayn', color: '#A78BFA', category: 'Magazin' }
                ]},
                { date: '2024-10-24', tasks: [
                    { text: '20 kartochka yaxshilash', color: '#F59E0B', category: 'Yandex' },
                    { text: '200 mahsulot yuklash', color: '#10B981', category: 'Yandex' },
                    { text: 'Dizayn tugashi', color: '#A78BFA', category: 'Magazin' }
                ]},
                { date: '2024-10-25', tasks: [
                    { text: '20 kartochka yaxshilash', color: '#F59E0B', category: 'Yandex' },
                    { text: '200 mahsulot yuklash', color: '#10B981', category: 'Yandex' }
                ]},
                { date: '2024-10-26', tasks: [
                    { text: '20 kartochka yaxshilash', color: '#F59E0B', category: 'Yandex' },
                    { text: '200 mahsulot yuklash', color: '#10B981', category: 'Yandex' },
                    { text: 'Click tolov tizimi ulash', color: '#A78BFA', category: 'Magazin' }
                ]},
                { date: '2024-10-27', tasks: [
                    { text: '20 kartochka yaxshilash', color: '#F59E0B', category: 'Yandex' },
                    { text: '200 mahsulot yuklash', color: '#10B981', category: 'Yandex' },
                    { text: 'Payme tolov tizimi ulash', color: '#A78BFA', category: 'Magazin' }
                ]},
                { date: '2024-10-28', tasks: [
                    { text: '20 kartochka yaxshilash', color: '#F59E0B', category: 'Yandex' },
                    { text: '200 mahsulot yuklash', color: '#10B981', category: 'Yandex' },
                    { text: 'Tolovni test qilish', color: '#A78BFA', category: 'Magazin' }
                ]},
                { date: '2024-10-29', tasks: [
                    { text: '20 kartochka yaxshilash', color: '#F59E0B', category: 'Yandex' },
                    { text: '200 mahsulot yuklash', color: '#10B981', category: 'Yandex' },
                    { text: 'Hosting sozlash', color: '#A78BFA', category: 'Magazin' }
                ]},
                { date: '2024-10-30', tasks: [
                    { text: '20 kartochka yaxshilash', color: '#F59E0B', category: 'Yandex' },
                    { text: '200 mahsulot yuklash', color: '#10B981', category: 'Yandex' },
                    { text: 'Hosting test', color: '#A78BFA', category: 'Magazin' }
                ]},
                { date: '2024-10-31', tasks: [
                    { text: '20 kartochka yaxshilash', color: '#F59E0B', category: 'Yandex' },
                    { text: '200 mahsulot yuklash', color: '#10B981', category: 'Yandex' },
                    { text: 'Domen ulash va test', color: '#A78BFA', category: 'Magazin' },
                    { text: 'MAGAZIN TAYYOR! 🎉', color: '#DC2626', category: 'Muhim' }
                ]},
                { date: '2024-11-01', tasks: [
                    { text: '20 kartochka yaxshilash', color: '#F59E0B', category: 'Yandex' },
                    { text: '200 mahsulot yuklash', color: '#10B981', category: 'Yandex' },
                    { text: 'Telegram kanal yaratish', color: '#38BDF8', category: 'Telegram' },
                    { text: 'YANDEX 50% TAYYOR! ✅', color: '#DC2626', category: 'Muhim' }
                ]},
                { date: '2024-11-02', tasks: [
                    { text: '20 kartochka yaxshilash', color: '#F59E0B', category: 'Yandex' },
                    { text: '200 mahsulot yuklash', color: '#10B981', category: 'Yandex' },
                    { text: 'Telegram dizayni', color: '#38BDF8', category: 'Telegram' }
                ]},
                { date: '2024-11-03', tasks: [
                    { text: '20 kartochka yaxshilash', color: '#F59E0B', category: 'Yandex' },
                    { text: '200 mahsulot yuklash', color: '#10B981', category: 'Yandex' },
                    { text: 'Telegram logo va tavsif', color: '#38BDF8', category: 'Telegram' }
                ]},
                { date: '2024-11-04', tasks: [
                    { text: '20 kartochka yaxshilash', color: '#F59E0B', category: 'Yandex' },
                    { text: '200 mahsulot yuklash', color: '#10B981', category: 'Yandex' },
                    { text: '50 ta mahsulot post', color: '#38BDF8', category: 'Telegram' }
                ]},
                { date: '2024-11-05', tasks: [
                    { text: '20 kartochka yaxshilash', color: '#F59E0B', category: 'Yandex' },
                    { text: '200 mahsulot yuklash', color: '#10B981', category: 'Yandex' },
                    { text: '50 ta mahsulot post', color: '#38BDF8', category: 'Telegram' }
                ]},
                { date: '2024-11-06', tasks: [
                    { text: 'Oxirgi 20 kartochka', color: '#F59E0B', category: 'Yandex' },
                    { text: 'Oxirgi 200 mahsulot', color: '#10B981', category: 'Yandex' },
                    { text: 'Telegram postlar davom', color: '#38BDF8', category: 'Telegram' }
                ]},
                { date: '2024-11-07', tasks: [
                    { text: 'Yandex umumiy tekshirish', color: '#F59E0B', category: 'Yandex' },
                    { text: 'Magazin oxirgi test', color: '#A78BFA', category: 'Magazin' },
                    { text: 'TELEGRAM TAYYOR! 📱', color: '#DC2626', category: 'Muhim' }
                ]},
                { date: '2024-11-08', tasks: [
                    { text: 'BARCHA LOYIHALAR TEKSHIRISH', color: '#DC2626', category: 'Muhim' },
                    { text: 'Yandex Market - final', color: '#F59E0B', category: 'Yandex' },
                    { text: 'Online Magazin - final', color: '#A78BFA', category: 'Magazin' },
                    { text: 'Telegram - final', color: '#38BDF8', category: 'Telegram' },
                    { text: '🎉🎉🎉 TAYYOR! 🎉🎉🎉', color: '#DC2626', category: 'Muhim' }
                ]}
            ];

            const createNodesFromDailyTasks = () => {
                const savedData = localStorage.getItem('mindMapData');
                if (savedData) {
                    return JSON.parse(savedData);
                }

                const allNodes = [];
                const allLinks = [];
                let nodeId = 1;

                allNodes.push({ id: nodeId++, x: 700, y: 50, text: '🎯 8-NOYABR TAYYOR', color: '#DC2626', type: 'main', done: false, date: null });
                allNodes.push({ id: nodeId++, x: 150, y: 200, text: '🔥 YANDEX', color: '#DC2626', type: 'main', done: false, date: null });
                allNodes.push({ id: nodeId++, x: 700, y: 200, text: '🌐 MAGAZIN', color: '#8B5CF6', type: 'main', done: false, date: null });
                allNodes.push({ id: nodeId++, x: 1250, y: 200, text: '📱 TELEGRAM', color: '#0EA5E9', type: 'main', done: false, date: null });

                dailyTasks.forEach((day, dayIndex) => {
                    const xOffset = 100 + (dayIndex % 5) * 280;
                    const yOffsetDay = 320 + Math.floor(dayIndex / 5) * 200;
                    
                    day.tasks.forEach((task, taskIndex) => {
                        const fullText = `📅 ${day.date.slice(5)}: ${task.text}`;
                        allNodes.push({
                            id: nodeId,
                            x: xOffset,
                            y: yOffsetDay + taskIndex * 50,
                            text: fullText,
                            color: task.color,
                            type: 'day',
                            done: false,
                            date: day.date,
                            category: task.category
                        });
                        nodeId++;
                    });
                });

                return { nodes: allNodes, links: allLinks };
            };

            const initialData = createNodesFromDailyTasks();
            const [nodes, setNodes] = useState(initialData.nodes);
            const [links, setLinks] = useState(initialData.links);
            const [selected, setSelected] = useState(null);
            const [dragging, setDragging] = useState(null);
            const [linking, setLinking] = useState(null);
            const [offset, setOffset] = useState({ x: 0, y: 0 });
            const [editing, setEditing] = useState(null);
            const [nextId, setNextId] = useState(1000);
            const [viewport, setViewport] = useState({ x: 0, y: 0, zoom: 0.7 });
            const [isPanning, setIsPanning] = useState(false);
            const [panStart, setPanStart] = useState({ x: 0, y: 0 });
            const canvasRef = useRef(null);

            useEffect(() => {
                localStorage.setItem('mindMapData', JSON.stringify({ nodes, links }));
            }, [nodes, links]);

            const getTodayTasks = () => {
                const today = currentDate.toISOString().split('T')[0];
                return nodes.filter(n => n.date === today);
            };

            const types = [
                { type: 'main', color: '#8B5CF6', label: 'Asosiy maqsad' },
                { type: 'day', color: '#F59E0B', label: 'Kunlik vazifa' }
            ];

            const addNode = (type) => {
                const t = types.find(x => x.type === type);
                const centerX = (window.innerWidth / 2 - viewport.x) / viewport.zoom;
                const centerY = (window.innerHeight / 2 - viewport.y) / viewport.zoom;
                setNodes([...nodes, {
                    id: nextId,
                    x: centerX,
                    y: centerY,
                    text: t.label,
                    color: t.color,
                    type,
                    done: false,
                    date: type === 'day' ? currentDate.toISOString().split('T')[0] : null
                }]);
                setNextId(nextId + 1);
            };

            const deleteNode = () => {
                if (selected) {
                    setNodes(nodes.filter(n => n.id !== selected));
                    setLinks(links.filter(l => l.from !== selected && l.to !== selected));
                    setSelected(null);
                }
            };

            const startLink = () => {
                if (selected) setLinking(selected);
            };

            const completeLink = (toId) => {
                if (linking && linking !== toId && !links.find(l => 
                    (l.from === linking && l.to === toId) || (l.from === toId && l.to === linking)
                )) {
                    setLinks([...links, { from: linking, to: toId }]);
                }
                setLinking(null);
            };

            const toggle = (id) => {
                setNodes(nodes.map(n => n.id === id ? { ...n, done: !n.done } : n));
            };

            const updateText = (id, text) => {
                setNodes(nodes.map(n => n.id === id ? { ...n, text } : n));
            };

            const zoomIn = () => setViewport(v => ({ ...v, zoom: Math.min(v.zoom * 1.2, 2) }));
            const zoomOut = () => setViewport(v => ({ ...v, zoom: Math.max(v.zoom / 1.2, 0.3) }));
            const resetView = () => setViewport({ x: 0, y: 0, zoom: 0.7 });

            const exportData = () => {
                const blob = new Blob([JSON.stringify({ nodes, links }, null, 2)], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `kunlik-reja-${Date.now()}.json`;
                a.click();
            };

            const handleCanvasMouseDown = (e) => {
                if (e.target.tagName === 'CANVAS' || e.target.className.includes('bg-gradient')) {
                    setIsPanning(true);
                    setPanStart({ x: e.clientX - viewport.x, y: e.clientY - viewport.y });
                }
            };

            const handleMouseMove = (e) => {
                if (dragging) {
                    const worldX = (e.clientX - viewport.x) / viewport.zoom;
                    const worldY = (e.clientY - viewport.y) / viewport.zoom;
                    setNodes(nodes.map(n => 
                        n.id === dragging ? { ...n, x: worldX - offset.x, y: worldY - offset.y } : n
                    ));
                } else if (isPanning) {
                    setViewport(v => ({ ...v, x: e.clientX - panStart.x, y: e.clientY - panStart.y }));
                }
            };

            const handleMouseUp = () => {
                setDragging(null);
                setIsPanning(false);
            };

            const handleWheel = (e) => {
                e.preventDefault();
                const delta = e.deltaY > 0 ? 0.9 : 1.1;
                setViewport(v => ({ ...v, zoom: Math.max(0.3, Math.min(2, v.zoom * delta)) }));
            };

            useEffect(() => {
                const ctx = canvasRef.current?.getContext('2d');
                if (!ctx) return;
                ctx.canvas.width = window.innerWidth;
                ctx.canvas.height = window.innerHeight;
                ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);
                
                ctx.save();
                ctx.translate(viewport.x, viewport.y);
                ctx.scale(viewport.zoom, viewport.zoom);
                
                links.forEach(l => {
                    const from = nodes.find(n => n.id === l.from);
                    const to = nodes.find(n => n.id === l.to);
                    if (!from || !to) return;
                    
                    const gradient = ctx.createLinearGradient(from.x + 90, from.y + 25, to.x + 90, to.y + 25);
                    gradient.addColorStop(0, '#8B5CF6');
                    gradient.addColorStop(1, '#06B6D4');
                    
                    ctx.beginPath();
                    ctx.moveTo(from.x + 90, from.y + 25);
                    ctx.lineTo(to.x + 90, to.y + 25);
                    ctx.strokeStyle = gradient;
                    ctx.lineWidth = 3;
                    ctx.shadowColor = '#8B5CF6';
                    ctx.shadowBlur = 10;
                    ctx.stroke();
                    ctx.shadowBlur = 0;
                    
                    const angle = Math.atan2(to.y - from.y, to.x - from.x);
                    ctx.beginPath();
                    ctx.moveTo(to.x + 90, to.y + 25);
                    ctx.lineTo(to.x + 90 - 10 * Math.cos(angle - 0.4), to.y + 25 - 10 * Math.sin(angle - 0.4));
                    ctx.lineTo(to.x + 90 - 10 * Math.cos(angle + 0.4), to.y + 25 - 10 * Math.sin(angle + 0.4));
                    ctx.closePath();
                    ctx.fillStyle = '#06B6D4';
                    ctx.fill();
                });
                
                ctx.restore();
            }, [nodes, links, viewport]);

            const stats = { total: nodes.length, done: nodes.filter(n => n.done).length };
            const todayTasks = getTodayTasks();
            const daysLeft = 19;

            return (
                <div className="w-full h-screen bg-gradient-to-br from-slate-950 via-purple-950 to-slate-950 relative overflow-hidden"
                    onMouseDown={handleCanvasMouseDown}
                    onMouseMove={handleMouseMove}
                    onMouseUp={handleMouseUp}
                    onWheel={handleWheel}>
                    
                    <div className="absolute inset-0 overflow-hidden pointer-events-none">
                        <div className="absolute w-96 h-96 bg-purple-500/10 rounded-full blur-3xl animate-pulse" style={{top:'10%',left:'20%'}}/>
                        <div className="absolute w-96 h-96 bg-blue-500/10 rounded-full blur-3xl animate-pulse" style={{top:'60%',right:'20%',animationDelay:'1s'}}/>
                    </div>

                    <canvas ref={canvasRef} className="absolute inset-0 pointer-events-none"/>

                    <div className="absolute top-0 inset-x-0 bg-gradient-to-r from-purple-600/90 via-pink-600/90 to-red-600/90 backdrop-blur-xl border-b border-white/20 shadow-2xl z-50">
                        <div className="flex justify-between items-center max-w-7xl mx-auto p-3">
                            <div className="flex items-center gap-4">
                                <div className="flex items-center gap-2">
                                    <Target size={28} className="text-yellow-300 animate-pulse"/>
                                    <div>
                                        <h1 className="text-2xl font-bold text-white flex items-center gap-2">
                                            8-Noyabrgacha
                                            <span className="px-3 py-1 bg-yellow-400 text-black rounded-full text-lg font-black animate-bounce">
                                                {daysLeft} KUN
                                            </span>
                                        </h1>
                                        <div className="flex items-center gap-3 text-sm">
                                            <span className="text-white/90">✅ {stats.done}/{stats.total}</span>
                                            <div className="h-2 w-32 bg-white/20 rounded-full overflow-hidden">
                                                <div className="h-full bg-gradient-to-r from-green-400 to-emerald-500 transition-all duration-500" 
                                                    style={{width:`${stats.total>0?(stats.done/stats.total)*100:0}%`}}/>
                                            </div>
                                            <span className="text-white/90 font-semibold">{stats.total>0?Math.round((stats.done/stats.total)*100):0}%</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div className="flex items-center gap-2">
                                <span className="text-xs text-white/60 mr-2">{VERSION}</span>
                                <button onClick={()=>setShowToday(!showToday)} className="px-4 py-2 bg-yellow-400 hover:bg-yellow-300 text-black rounded-xl font-black transition-all flex items-center gap-2 shadow-lg hover:scale-105 animate-pulse">
                                    <Clock size={18}/>
                                    BUGUNGI VAZIFALAR
                                </button>
                                <button onClick={exportData} className="px-4 py-2 bg-white hover:bg-yellow-100 text-purple-600 rounded-xl font-bold transition-all flex items-center gap-2 shadow-lg">
                                    <Download size={18}/> SAQLASH
                                </button>
                            </div>
                        </div>
                    </div>

                    {showToday && (
                        <div className="absolute inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center" onClick={()=>setShowToday(false)}>
                            <div className="w-[600px] max-h-[80vh] bg-gradient-to-br from-purple-900/98 to-pink-900/98 backdrop-blur-xl rounded-3xl border-2 border-yellow-400 shadow-2xl overflow-hidden" onClick={(e)=>e.stopPropagation()}>
                                <div className="bg-gradient-to-r from-yellow-400 via-orange-500 to-red-500 p-6 relative">
                                    <button onClick={()=>setShowToday(false)} className="absolute top-4 right-4 w-10 h-10 bg-black/30 hover:bg-black/50 rounded-full flex items-center justify-center transition-all">
                                        <X size={24} className="text-white"/>
                                    </button>
                                    <h2 className="text-3xl font-black text-black flex items-center gap-3">
                                        <Calendar size={36} className="animate-bounce"/>
                                        BUGUN QILISH KERAK
                                    </h2>
                                    <p className="text-black/80 text-lg font-bold mt-2">
                                        📅 20-Oktabr 2024, Yakshanba
                                    </p>
                                    <div className="mt-3 flex items-center gap-3">
                                        <div className="flex-1 h-3 bg-black/20 rounded-full overflow-hidden">
                                            <div className="h-full bg-gradient-to-r from-green-400 to-emerald-500 transition-all duration-500" 
                                                style={{width:`${todayTasks.length>0?(todayTasks.filter(t=>t.done).length/todayTasks.length)*100:0}%`}}/>
                                        </div>
                                        <span className="text-black font-black text-lg">{todayTasks.filter(t=>t.done).length}/{todayTasks.length}</span>
                                    </div>
                                </div>
                                
                                <div className="p-6 space-y-4 max-h-[50vh] overflow-y-auto">
                                    {todayTasks.map((task,index)=>(
                                        <div key={task.id} className={`group relative p-5 rounded-2xl backdrop-blur border-2 transition-all cursor-pointer hover:scale-102 ${
                                            task.done?'bg-green-500/20 border-green-400/60':'bg-white/10 border-white/30 hover:bg-white/20 hover:border-yellow-400'
                                        }`} onClick={()=>toggle(task.id)}>
                                            <div className="flex items-start gap-4">
                                                <div className={`flex-shrink-0 w-12 h-12 rounded-2xl flex items-center justify-center text-2xl font-black ${
                                                    task.done?'bg-green-500 scale-110':'bg-gradient-to-br from-purple-500 to-pink-500'
                                                }`}>
                                                    {task.done?'✓':index+1}
                                                </div>
                                                <div className="flex-1">
                                                    <p className={`text-white text-lg font-bold ${task.done?'line-through opacity-60':''}`}>
                                                        {task.text.replace(/📅 \d+-\d+: /,'')}
                                                    </p>
                                                    <div className="flex items-center gap-2 mt-2">
                                                        <span className={`px-3 py-1 rounded-full text-xs font-bold ${
                                                            task.category==='Yandex'?'bg-orange-500/30 text-orange-200':
                                                            task.category==='Magazin'?'bg-purple-500/30 text-purple-200':
                                                            'bg-blue-500/30 text-blue-200'
                                                        }`}>
                                                            {task.category}
                                                        </span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    ))}
                                </div>
                                
                                <div className="p-6 bg-black/30 border-t-2 border-yellow-400/30">
                                    <div className="flex justify-between items-center text-white">
                                        <div>
                                            <p className="text-lg font-bold">Bugungi progress</p>
                                        </div>
                                        <div className="text-right">
                                            <p className="text-4xl font-black text-yellow-400">
                                                {todayTasks.length>0?Math.round((todayTasks.filter(t=>t.done).length/todayTasks.length)*100):0}%
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}

                    <div className="absolute left-4 top-20 bg-gradient-to-br from-purple-900/95 to-blue-900/95 backdrop-blur-xl rounded-2xl p-3 border border-white/20 shadow-2xl space-y-2 z-40">
                        <p className="text-purple-300 font-bold text-sm">QO'SHISH</p>
                        {types.map(({type,color,label})=>(
                            <button key={type} onClick={()=>addNode(type)} 
                                className="w-full px-3 py-2 rounded-xl text-white text-xs font-medium hover:scale-105 transition-all shadow-lg border border-white/20"
                                style={{background:`linear-gradient(135deg,${color},${color}dd)`}}>
                                {label}
                            </button>
                        ))}
                        <div className="border-t border-white/20 pt-2 space-y-2">
                            <button onClick={startLink} disabled={!selected} 
                                className={`w-full px-3 py-2 rounded-xl text-white text-xs font-medium transition-all shadow-lg border border-white/20 ${
                                    selected?'bg-gradient-to-r from-blue-600 to-cyan-600 hover:scale-105':'bg-white/10 opacity-50'
                                }`}>
                                <Link2 size={12} className="inline"/> Bog'lash
                            </button>
                            <button onClick={deleteNode} disabled={!selected} 
                                className={`w-full px-3 py-2 rounded-xl text-white text-xs font-medium transition-all shadow-lg border border-white/20 ${
                                    selected?'bg-gradient-to-r from-red-600 to-pink-600 hover:scale-105':'bg-white/10 opacity-50'
                                }`}>
                                <Trash2 size={12} className="inline"/> O'chirish
                            </button>
                        </div>
                    </div>

                    <div className="absolute right-4 bottom-4 bg-gradient-to-br from-purple-900/95 to-blue-900/95 backdrop-blur-xl rounded-2xl p-3 border border-white/20 shadow-2xl space-y-2 z-40">
                        <p className="text-purple-300 font-bold text-sm">BOSHQARISH</p>
                        <button onClick={zoomIn} className="w-full px-3 py-2 bg-gradient-to-r from-green-600 to-emerald-600 hover:scale-105 rounded-xl text-white text-xs font-medium transition-all shadow-lg border border-white/20">
                            <ZoomIn size={12} className="inline"/> Zoom +
                        </button>
                        <button onClick={zoomOut} className="w-full px-3 py-2 bg-gradient-to-r from-orange-600 to-red-600 hover:scale-105 rounded-xl text-white text-xs font-medium transition-all shadow-lg border border-white/20">
                            <ZoomOut size={12} className="inline"/> Zoom -
                        </button>
                        <button onClick={resetView} className="w-full px-3 py-2 bg-gradient-to-r from-purple-600 to-pink-600 hover:scale-105 rounded-xl text-white text-xs font-medium transition-all shadow-lg border border-white/20">
                            <Home size={12} className="inline"/> Reset
                        </button>
                        <p className="text-white/60 text-xs pt-2 border-t border-white/20">Zoom: {Math.round(viewport.zoom*100)}%</p>
                    </div>

                    <div style={{transform:`translate(${viewport.x}px,${viewport.y}px) scale(${viewport.zoom})`,transformOrigin:'0 0'}} className="absolute inset-0 pointer-events-none">
                        {nodes.map(node=>(
                            <div key={node.id} className={`absolute pointer-events-auto cursor-grab active:cursor-grabbing transition-all duration-200 ${
                                selected===node.id?'scale-110 z-10':'hover:scale-105'
                            } ${node.done?'opacity-50':''}`}
                            style={{left:node.x,top:node.y}}
                            onMouseDown={(e)=>{
                                e.stopPropagation();
                                setDragging(node.id);
                                setSelected(node.id);
                                const worldX=(e.clientX-viewport.x)/viewport.zoom;
                                const worldY=(e.clientY-viewport.y)/viewport.zoom;
                                setOffset({x:worldX-node.x,y:worldY-node.y});
                            }}
                            onClick={(e)=>{e.stopPropagation();if(linking)completeLink(node.id);}}
                            onDoubleClick={(e)=>{e.stopPropagation();setEditing(node.id);}}>
                                <div className={`relative w-44 p-2 rounded-xl backdrop-blur-xl border-2 shadow-2xl transition-all ${
                                    selected===node.id?'border-yellow-400 shadow-yellow-400/50':'border-white/30'
                                }`}
                                style={{
                                    background:`linear-gradient(135deg,${node.color}cc,${node.color}99)`,
                                    boxShadow:selected===node.id?`0 0 30px ${node.color}80`:`0 10px 30px ${node.color}40`
                                }}>
                                    {editing===node.id?(
                                        <input value={node.text} onChange={(e)=>updateText(node.id,e.target.value)}
                                            onBlur={()=>setEditing(null)} onKeyPress={(e)=>e.key==='Enter'&&setEditing(null)}
                                            className="w-full bg-white/20 text-white text-xs px-2 py-1 rounded outline-none"
                                            autoFocus onClick={(e)=>e.stopPropagation()}/>
                                    ):(
                                        <p className={`text-white text-xs font-bold break-words ${node.done?'line-through':''}`}>{node.text}</p>
                                    )}
                                    <button onClick={(e)=>{e.stopPropagation();toggle(node.id);}}
                                        className="absolute -top-2 -right-2 w-6 h-6 bg-white rounded-full flex items-center justify-center shadow-xl hover:scale-110 transition-all border-2 border-purple-400">
                                        {node.done?<CheckCircle size={14} className="text-green-600"/>:<div className="w-2.5 h-2.5 border-2 border-gray-500 rounded-full"/>}
                                    </button>
                                </div>
                            </div>
                        ))}
                    </div>

                    {linking&&(
                        <div className="absolute bottom-8 left-1/2 -translate-x-1/2 bg-gradient-to-r from-yellow-400 to-orange-500 text-black px-8 py-4 rounded-full font-black shadow-2xl animate-bounce z-50 text-lg border-4 border-white">
                            🔗 Ikkinchi elementni bosing!
                        </div>
                    )}
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<MindMap />);
    </script>
</body>
</html>